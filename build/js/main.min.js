document.addEventListener("DOMContentLoaded", (e) => {
  // initialize using-areas-slider
  const usingAreas = new Swiper(".using-card__container", {
    speed: 400,
    spaceBetween: 10,
    slidesPerView: 1,
    loop: true,
    navigation: {
      nextEl: ".using-areas__pagination-next",
      prevEl: ".using-areas__pagination-prev",
    },
    breakpoints: {
      551: {
        slidesPerView: 2,
        spaceBetween: 40,
      },
      769: {
        slidesPerView: 3,
        spaceBetween: 11,
      },
      1026: {
        slidesPerView: 4,
      },
    },
  });

  // Initialize dronico slider
  const dronicoSlider = new Swiper(".dronico-slider__container", {
    speed: 500,
    slidesPerView: 1,
    loop: true,
    spaceBetween: 100,
    effect: "fade",
    fadeEffect: {
      crossFade: true,
    },
    grabCursor: true,
    navigation: {
      nextEl: ".dronico-slider__pagination-next",
      prevEl: ".dronico-slider__pagination-prev",
    },
  });
  const dronicoImgSlider = new Swiper(".dronico-slider__img-container", {
    speed: 500,
    slidesPerView: 1,
    loop: true,
    direction: "vertical",
    simulateTouch: false,
    mousewheelControl: false,
    freeMode: false,
  });
  const dronicoImgNumSlider = new Swiper(".dronico-slider__imgNum-container", {
    speed: 500,
    slidesPerView: 1,
    loop: true,
    mousewheelControl: false,
    freeMode: false,
    simulateTouch: false,
    effect: "fade",
    fadeEffect: {
      crossFade: true,
    },
    breakpoints: {
      769: {
        slidesPerView: 1,
        spaceBetween: 0,
      },
      1441: {
        spaceBetween: 100,
      },
    },
  });

  dronicoSlider.controller.control = dronicoImgNumSlider;
  dronicoImgNumSlider.controller.control = dronicoImgSlider;

  // Initialize mobile dronico slider
  const dronicoMobileSlider = new Swiper(".dronico-slider__mobile-container", {
    speed: 500,
    slidesPerView: 1,
    loop: true,
    mousewheelControl: false,
    freeMode: false,
    simulateTouch: false,
    effect: "fade",
    fadeEffect: {
      crossFade: true,
		},
		pagination: {
			el: '.dronico-slider__mobile-pagination',
			clickable: true
		}
  });

  // Initialize work slider
  const workSlider = new Swiper(".work__container", {
    speed: 400,
    slidesPerView: 6,
    spaceBetween: 23,
    navigation: {
      nextEl: ".work__navigation-next",
      prevEl: ".work__navigation-prev",
    },
  });

  const workContainer = document.createElement("div"),
    workCards = document.querySelectorAll(".work__slide"),
    workWrapper = document.querySelector(".work__wrapper");

  // check resize slider
  // function handleTabletChange(e) {
  //   if (e.matches) {
  //     workSlider.destroy(false, true);

  //     workContainer.className = "work__cards";
  //     workCards.forEach((card) => {
  //       workContainer.append(card);
  //     });
  // 		workWrapper.append(workContainer);

  //   } else {
  // 		workSlider.init();

  // 		workCards.forEach((card) => {
  // 			workWrapper.append(card);
  // 		});
  //   }
  // }
  // const mediaQuery = window.matchMedia("(max-width: 1251px)");
  // mediaQuery.addListener(handleTabletChange);
  // handleTabletChange(mediaQuery);

  // Main code
  const dronsContainer = document.querySelector(".tech-dronico__img-container"),
    dronsBtns = document.querySelectorAll(".tech-dronico__btn"),
    dronTexts = document.querySelectorAll(".tech-dronico__text"),
    active = "active-btn";

  if (dronsContainer) {
    dronsContainer.addEventListener("click", (e) => {
      const target = e.target;
      if (target.classList.contains("tech-dronico__btn")) {
        dronsBtns.forEach((btn) => {
          btn.classList.remove(active);
        });
        dronTexts.forEach((text) => {
          text.classList.remove(active);
          if (text.dataset.text == target.dataset.text) {
            text.classList.add(active);
            target.classList.add(active);
          }
        });
      }
    });
  }

  //Lottie svg handlers
  const techTab = document.querySelector(".technologies__tabs");
  if (techTab) {
    techTab.onmouseover = techTab.onmouseout = (e) => {
      const target = e.target;
      if (target.classList.contains("technologies__tab")) {
        const techLottie = target.querySelector(".lottie-tech");
        if (techLottie) {
          if (e.type == "mouseover") {
            techLottie.play();
            techLottie.setLooping(true);
          } else {
            techLottie.setLooping(false);
          }
        }
      }
    };
  }
});


// ——————————————————————————————————————————————————
// TextScramble
// ——————————————————————————————————————————————————

class TextScramble {
  constructor(el) {
    this.el = el
    this.chars = '0123456789><+-.%'
    this.update = this.update.bind(this)
  }
  setText(newText) {
    const oldText = this.el.innerText
    const length = Math.max(oldText.length, newText.length)
    const promise = new Promise((resolve) => this.resolve = resolve)
    this.queue = []
    for (let i = 0; i < length; i++) {
      const from = oldText[i] || ''
      const to = newText[i] || ''
      const start = Math.floor(Math.random() * 40)
      const end = start + Math.floor(Math.random() * 40)
      this.queue.push({ from, to, start, end })
    }
    cancelAnimationFrame(this.frameRequest)
    this.frame = 0
    this.update()
    return promise
  }
  update() {
    let output = ''
    let complete = 0
    for (let i = 0, n = this.queue.length; i < n; i++) {
      let { from, to, start, end, char } = this.queue[i]
      if (this.frame >= end) {
        complete++
        output += to
      } else if (this.frame >= start) {
        if (!char || Math.random() < 0.28) {
          char = this.randomChar()
          this.queue[i].char = char
        }
        output += `<span class="dud">${char}</span>`
      } else {
        output += from
      }
    }
    this.el.innerHTML = output
    if (complete === this.queue.length) {
      this.resolve()
    } else {
      this.frameRequest = requestAnimationFrame(this.update)
      this.frame++
    }
  }
  randomChar() {
    return this.chars[Math.floor(Math.random() * this.chars.length)]
  }
}
const phrases = [
  '70.512323, 45.11974',
  '2.3513, -78.28398690',
  '74.32334, 24.34523',
  '-12.512323, 45.11974',
  '72.512344, 3.129043',
  '-70.512323, 20.11974',
  '83.123341, 42.75656'
]

const el = document.querySelectorAll('.scrumble-text');

const fx1 = new TextScramble(el[0])
let counter1 = 0;
const next1 = () => {
  fx1.setText(phrases[counter1]).then(() => {
    setTimeout(next1, 800)
  })
  counter1 = (counter1 + 1) % phrases.length
}
next1();

const fx2 = new TextScramble(el[1])
let counter2 = 0;
const next2 = () => {
  fx2.setText(phrases[counter2]).then(() => {
    setTimeout(next2, 800)
  })
  counter2 = (counter2 + 1) % phrases.length
}
next2();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIChlKSA9PiB7XHJcbiAgLy8gaW5pdGlhbGl6ZSB1c2luZy1hcmVhcy1zbGlkZXJcclxuICBjb25zdCB1c2luZ0FyZWFzID0gbmV3IFN3aXBlcihcIi51c2luZy1jYXJkX19jb250YWluZXJcIiwge1xyXG4gICAgc3BlZWQ6IDQwMCxcclxuICAgIHNwYWNlQmV0d2VlbjogMTAsXHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi51c2luZy1hcmVhc19fcGFnaW5hdGlvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIudXNpbmctYXJlYXNfX3BhZ2luYXRpb24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDU1MToge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiA0MCxcclxuICAgICAgfSxcclxuICAgICAgNzY5OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDExLFxyXG4gICAgICB9LFxyXG4gICAgICAxMDI2OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIC8vIEluaXRpYWxpemUgZHJvbmljbyBzbGlkZXJcclxuICBjb25zdCBkcm9uaWNvU2xpZGVyID0gbmV3IFN3aXBlcihcIi5kcm9uaWNvLXNsaWRlcl9fY29udGFpbmVyXCIsIHtcclxuICAgIHNwZWVkOiA1MDAsXHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIHNwYWNlQmV0d2VlbjogMTAwLFxyXG4gICAgZWZmZWN0OiBcImZhZGVcIixcclxuICAgIGZhZGVFZmZlY3Q6IHtcclxuICAgICAgY3Jvc3NGYWRlOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuZHJvbmljby1zbGlkZXJfX3BhZ2luYXRpb24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLmRyb25pY28tc2xpZGVyX19wYWdpbmF0aW9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgY29uc3QgZHJvbmljb0ltZ1NsaWRlciA9IG5ldyBTd2lwZXIoXCIuZHJvbmljby1zbGlkZXJfX2ltZy1jb250YWluZXJcIiwge1xyXG4gICAgc3BlZWQ6IDUwMCxcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBsb29wOiB0cnVlLFxyXG4gICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXHJcbiAgICBzaW11bGF0ZVRvdWNoOiBmYWxzZSxcclxuICAgIG1vdXNld2hlZWxDb250cm9sOiBmYWxzZSxcclxuICAgIGZyZWVNb2RlOiBmYWxzZSxcclxuICB9KTtcclxuICBjb25zdCBkcm9uaWNvSW1nTnVtU2xpZGVyID0gbmV3IFN3aXBlcihcIi5kcm9uaWNvLXNsaWRlcl9faW1nTnVtLWNvbnRhaW5lclwiLCB7XHJcbiAgICBzcGVlZDogNTAwLFxyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtb3VzZXdoZWVsQ29udHJvbDogZmFsc2UsXHJcbiAgICBmcmVlTW9kZTogZmFsc2UsXHJcbiAgICBzaW11bGF0ZVRvdWNoOiBmYWxzZSxcclxuICAgIGVmZmVjdDogXCJmYWRlXCIsXHJcbiAgICBmYWRlRWZmZWN0OiB7XHJcbiAgICAgIGNyb3NzRmFkZTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njk6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgfSxcclxuICAgICAgMTQ0MToge1xyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMTAwLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgZHJvbmljb1NsaWRlci5jb250cm9sbGVyLmNvbnRyb2wgPSBkcm9uaWNvSW1nTnVtU2xpZGVyO1xyXG4gIGRyb25pY29JbWdOdW1TbGlkZXIuY29udHJvbGxlci5jb250cm9sID0gZHJvbmljb0ltZ1NsaWRlcjtcclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBtb2JpbGUgZHJvbmljbyBzbGlkZXJcclxuICBjb25zdCBkcm9uaWNvTW9iaWxlU2xpZGVyID0gbmV3IFN3aXBlcihcIi5kcm9uaWNvLXNsaWRlcl9fbW9iaWxlLWNvbnRhaW5lclwiLCB7XHJcbiAgICBzcGVlZDogNTAwLFxyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtb3VzZXdoZWVsQ29udHJvbDogZmFsc2UsXHJcbiAgICBmcmVlTW9kZTogZmFsc2UsXHJcbiAgICBzaW11bGF0ZVRvdWNoOiBmYWxzZSxcclxuICAgIGVmZmVjdDogXCJmYWRlXCIsXHJcbiAgICBmYWRlRWZmZWN0OiB7XHJcbiAgICAgIGNyb3NzRmFkZTogdHJ1ZSxcclxuXHRcdH0sXHJcblx0XHRwYWdpbmF0aW9uOiB7XHJcblx0XHRcdGVsOiAnLmRyb25pY28tc2xpZGVyX19tb2JpbGUtcGFnaW5hdGlvbicsXHJcblx0XHRcdGNsaWNrYWJsZTogdHJ1ZVxyXG5cdFx0fVxyXG4gIH0pO1xyXG5cclxuICAvLyBJbml0aWFsaXplIHdvcmsgc2xpZGVyXHJcbiAgY29uc3Qgd29ya1NsaWRlciA9IG5ldyBTd2lwZXIoXCIud29ya19fY29udGFpbmVyXCIsIHtcclxuICAgIHNwZWVkOiA0MDAsXHJcbiAgICBzbGlkZXNQZXJWaWV3OiA2LFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAyMyxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi53b3JrX19uYXZpZ2F0aW9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi53b3JrX19uYXZpZ2F0aW9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHdvcmtDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgd29ya0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3JrX19zbGlkZVwiKSxcclxuICAgIHdvcmtXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53b3JrX193cmFwcGVyXCIpO1xyXG5cclxuICAvLyBjaGVjayByZXNpemUgc2xpZGVyXHJcbiAgLy8gZnVuY3Rpb24gaGFuZGxlVGFibGV0Q2hhbmdlKGUpIHtcclxuICAvLyAgIGlmIChlLm1hdGNoZXMpIHtcclxuICAvLyAgICAgd29ya1NsaWRlci5kZXN0cm95KGZhbHNlLCB0cnVlKTtcclxuXHJcbiAgLy8gICAgIHdvcmtDb250YWluZXIuY2xhc3NOYW1lID0gXCJ3b3JrX19jYXJkc1wiO1xyXG4gIC8vICAgICB3b3JrQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gIC8vICAgICAgIHdvcmtDb250YWluZXIuYXBwZW5kKGNhcmQpO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyBcdFx0d29ya1dyYXBwZXIuYXBwZW5kKHdvcmtDb250YWluZXIpO1xyXG5cclxuICAvLyAgIH0gZWxzZSB7XHJcbiAgLy8gXHRcdHdvcmtTbGlkZXIuaW5pdCgpO1xyXG5cclxuICAvLyBcdFx0d29ya0NhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAvLyBcdFx0XHR3b3JrV3JhcHBlci5hcHBlbmQoY2FyZCk7XHJcbiAgLy8gXHRcdH0pO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuICAvLyBjb25zdCBtZWRpYVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxMjUxcHgpXCIpO1xyXG4gIC8vIG1lZGlhUXVlcnkuYWRkTGlzdGVuZXIoaGFuZGxlVGFibGV0Q2hhbmdlKTtcclxuICAvLyBoYW5kbGVUYWJsZXRDaGFuZ2UobWVkaWFRdWVyeSk7XHJcblxyXG4gIC8vIE1haW4gY29kZVxyXG4gIGNvbnN0IGRyb25zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWNoLWRyb25pY29fX2ltZy1jb250YWluZXJcIiksXHJcbiAgICBkcm9uc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRlY2gtZHJvbmljb19fYnRuXCIpLFxyXG4gICAgZHJvblRleHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZWNoLWRyb25pY29fX3RleHRcIiksXHJcbiAgICBhY3RpdmUgPSBcImFjdGl2ZS1idG5cIjtcclxuXHJcbiAgaWYgKGRyb25zQ29udGFpbmVyKSB7XHJcbiAgICBkcm9uc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGVjaC1kcm9uaWNvX19idG5cIikpIHtcclxuICAgICAgICBkcm9uc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShhY3RpdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyb25UZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICB0ZXh0LmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlKTtcclxuICAgICAgICAgIGlmICh0ZXh0LmRhdGFzZXQudGV4dCA9PSB0YXJnZXQuZGF0YXNldC50ZXh0KSB7XHJcbiAgICAgICAgICAgIHRleHQuY2xhc3NMaXN0LmFkZChhY3RpdmUpO1xyXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChhY3RpdmUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vTG90dGllIHN2ZyBoYW5kbGVyc1xyXG4gIGNvbnN0IHRlY2hUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlY2hub2xvZ2llc19fdGFic1wiKTtcclxuICBpZiAodGVjaFRhYikge1xyXG4gICAgdGVjaFRhYi5vbm1vdXNlb3ZlciA9IHRlY2hUYWIub25tb3VzZW91dCA9IChlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRlY2hub2xvZ2llc19fdGFiXCIpKSB7XHJcbiAgICAgICAgY29uc3QgdGVjaExvdHRpZSA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmxvdHRpZS10ZWNoXCIpO1xyXG4gICAgICAgIGlmICh0ZWNoTG90dGllKSB7XHJcbiAgICAgICAgICBpZiAoZS50eXBlID09IFwibW91c2VvdmVyXCIpIHtcclxuICAgICAgICAgICAgdGVjaExvdHRpZS5wbGF5KCk7XHJcbiAgICAgICAgICAgIHRlY2hMb3R0aWUuc2V0TG9vcGluZyh0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRlY2hMb3R0aWUuc2V0TG9vcGluZyhmYWxzZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxuLy8g4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCUXHJcbi8vIFRleHRTY3JhbWJsZVxyXG4vLyDigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJRcclxuXHJcbmNsYXNzIFRleHRTY3JhbWJsZSB7XHJcbiAgY29uc3RydWN0b3IoZWwpIHtcclxuICAgIHRoaXMuZWwgPSBlbFxyXG4gICAgdGhpcy5jaGFycyA9ICcwMTIzNDU2Nzg5PjwrLS4lJ1xyXG4gICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG4gIHNldFRleHQobmV3VGV4dCkge1xyXG4gICAgY29uc3Qgb2xkVGV4dCA9IHRoaXMuZWwuaW5uZXJUZXh0XHJcbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChvbGRUZXh0Lmxlbmd0aCwgbmV3VGV4dC5sZW5ndGgpXHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHRoaXMucmVzb2x2ZSA9IHJlc29sdmUpXHJcbiAgICB0aGlzLnF1ZXVlID0gW11cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZnJvbSA9IG9sZFRleHRbaV0gfHwgJydcclxuICAgICAgY29uc3QgdG8gPSBuZXdUZXh0W2ldIHx8ICcnXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDApXHJcbiAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDApXHJcbiAgICAgIHRoaXMucXVldWUucHVzaCh7IGZyb20sIHRvLCBzdGFydCwgZW5kIH0pXHJcbiAgICB9XHJcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lUmVxdWVzdClcclxuICAgIHRoaXMuZnJhbWUgPSAwXHJcbiAgICB0aGlzLnVwZGF0ZSgpXHJcbiAgICByZXR1cm4gcHJvbWlzZVxyXG4gIH1cclxuICB1cGRhdGUoKSB7XHJcbiAgICBsZXQgb3V0cHV0ID0gJydcclxuICAgIGxldCBjb21wbGV0ZSA9IDBcclxuICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5xdWV1ZS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgbGV0IHsgZnJvbSwgdG8sIHN0YXJ0LCBlbmQsIGNoYXIgfSA9IHRoaXMucXVldWVbaV1cclxuICAgICAgaWYgKHRoaXMuZnJhbWUgPj0gZW5kKSB7XHJcbiAgICAgICAgY29tcGxldGUrK1xyXG4gICAgICAgIG91dHB1dCArPSB0b1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZnJhbWUgPj0gc3RhcnQpIHtcclxuICAgICAgICBpZiAoIWNoYXIgfHwgTWF0aC5yYW5kb20oKSA8IDAuMjgpIHtcclxuICAgICAgICAgIGNoYXIgPSB0aGlzLnJhbmRvbUNoYXIoKVxyXG4gICAgICAgICAgdGhpcy5xdWV1ZVtpXS5jaGFyID0gY2hhclxyXG4gICAgICAgIH1cclxuICAgICAgICBvdXRwdXQgKz0gYDxzcGFuIGNsYXNzPVwiZHVkXCI+JHtjaGFyfTwvc3Bhbj5gXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3V0cHV0ICs9IGZyb21cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSBvdXRwdXRcclxuICAgIGlmIChjb21wbGV0ZSA9PT0gdGhpcy5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5yZXNvbHZlKClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZnJhbWVSZXF1ZXN0ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKVxyXG4gICAgICB0aGlzLmZyYW1lKytcclxuICAgIH1cclxuICB9XHJcbiAgcmFuZG9tQ2hhcigpIHtcclxuICAgIHJldHVybiB0aGlzLmNoYXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2hhcnMubGVuZ3RoKV1cclxuICB9XHJcbn1cclxuY29uc3QgcGhyYXNlcyA9IFtcclxuICAnNzAuNTEyMzIzLCA0NS4xMTk3NCcsXHJcbiAgJzIuMzUxMywgLTc4LjI4Mzk4NjkwJyxcclxuICAnNzQuMzIzMzQsIDI0LjM0NTIzJyxcclxuICAnLTEyLjUxMjMyMywgNDUuMTE5NzQnLFxyXG4gICc3Mi41MTIzNDQsIDMuMTI5MDQzJyxcclxuICAnLTcwLjUxMjMyMywgMjAuMTE5NzQnLFxyXG4gICc4My4xMjMzNDEsIDQyLjc1NjU2J1xyXG5dXHJcblxyXG5jb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3J1bWJsZS10ZXh0Jyk7XHJcblxyXG5jb25zdCBmeDEgPSBuZXcgVGV4dFNjcmFtYmxlKGVsWzBdKVxyXG5sZXQgY291bnRlcjEgPSAwO1xyXG5jb25zdCBuZXh0MSA9ICgpID0+IHtcclxuICBmeDEuc2V0VGV4dChwaHJhc2VzW2NvdW50ZXIxXSkudGhlbigoKSA9PiB7XHJcbiAgICBzZXRUaW1lb3V0KG5leHQxLCA4MDApXHJcbiAgfSlcclxuICBjb3VudGVyMSA9IChjb3VudGVyMSArIDEpICUgcGhyYXNlcy5sZW5ndGhcclxufVxyXG5uZXh0MSgpO1xyXG5cclxuY29uc3QgZngyID0gbmV3IFRleHRTY3JhbWJsZShlbFsxXSlcclxubGV0IGNvdW50ZXIyID0gMDtcclxuY29uc3QgbmV4dDIgPSAoKSA9PiB7XHJcbiAgZngyLnNldFRleHQocGhyYXNlc1tjb3VudGVyMl0pLnRoZW4oKCkgPT4ge1xyXG4gICAgc2V0VGltZW91dChuZXh0MiwgODAwKVxyXG4gIH0pXHJcbiAgY291bnRlcjIgPSAoY291bnRlcjIgKyAxKSAlIHBocmFzZXMubGVuZ3RoXHJcbn1cclxubmV4dDIoKTsiXSwiZmlsZSI6Im1haW4ubWluLmpzIn0=
